
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Android Contacts API Library for Kotlin and Java.">
      
      
        <meta name="author" content="Vandolf Estrellado">
      
      
        <link rel="canonical" href="https://vestrel00.github.io/contacts-android/entities/about-contact-lookup-key/">
      
      
        <link rel="prev" href="../about-local-contacts/">
      
      
        <link rel="next" href="../sync-contact-data/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Contact lookup key vs ID - Contacts, Reborn</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"JetBrains Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-orange" data-md-color-accent="red">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#contact-lookup-key-vs-id" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Contacts, Reborn" class="md-header__button md-logo" aria-label="Contacts, Reborn" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 0H4v2h16zM4 24h16v-2H4zM20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2m-8 2.75A2.25 2.25 0 0 1 14.25 9 2.25 2.25 0 0 1 12 11.25 2.25 2.25 0 0 1 9.75 9 2.25 2.25 0 0 1 12 6.75M17 17H7v-1.5c0-1.67 3.33-2.5 5-2.5s5 .83 5 2.5z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Contacts, Reborn
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Contact lookup key vs ID
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="deep-orange" data-md-color-accent="red"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="deep-orange" data-md-color-accent="red"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/vestrel00/contacts-android" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    vestrel00/contacts-android
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Contacts, Reborn" class="md-nav__button md-logo" aria-label="Contacts, Reborn" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 0H4v2h16zM4 24h16v-2H4zM20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2m-8 2.75A2.25 2.25 0 0 1 14.25 9 2.25 2.25 0 0 1 12 11.25 2.25 2.25 0 0 1 9.75 9 2.25 2.25 0 0 1 12 6.75M17 17H7v-1.5c0-1.67 3.33-2.5 5-2.5s5 .83 5 2.5z"/></svg>

    </a>
    Contacts, Reborn
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/vestrel00/contacts-android" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    vestrel00/contacts-android
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheet/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cheatsheet
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Setup
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Setup
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../setup/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../setup/setup-contacts-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contacts API Setup
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Entities
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Entities
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../about-api-entities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API entities
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../about-blank-contacts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Blank contacts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../about-blank-data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Blank data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../about-local-contacts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Local (device-only) contacts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Contact lookup key vs ID
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Contact lookup key vs ID
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#when-to-use-contact-lookup-key-vs-contact-id" class="md-nav__link">
    <span class="md-ellipsis">
      When to use Contact lookup key vs Contact ID?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-get-the-contact-lookup-key" class="md-nav__link">
    <span class="md-ellipsis">
      How to get the Contact lookup key?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-get-contacts-using-lookup-keys" class="md-nav__link">
    <span class="md-ellipsis">
      How to get Contacts using lookup keys?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="How to get Contacts using lookup keys?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-the-lookupquery" class="md-nav__link">
    <span class="md-ellipsis">
      Using the LookupQuery
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-the-query-api" class="md-nav__link">
    <span class="md-ellipsis">
      Using the Query API
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#updating-local-device-only-contacts-and-the-lookup-key" class="md-nav__link">
    <span class="md-ellipsis">
      Updating local, device-only contacts and the lookup key
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#linkingunlinking-contacts-and-the-lookup-key" class="md-nav__link">
    <span class="md-ellipsis">
      Linking/unlinking contacts and the lookup key
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#moving-rawcontacts-between-accounts-and-the-lookup-key" class="md-nav__link">
    <span class="md-ellipsis">
      Moving RawContacts between accounts and the lookup key
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#developer-notes-or-for-advanced-users" class="md-nav__link">
    <span class="md-ellipsis">
      Developer notes (or for advanced users)
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sync-contact-data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sync contact data across devices
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../redact-apis-and-entities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Redact entities and API input and output in production
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Basics
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Basics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/query-contacts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Query contacts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/query-contacts-advanced/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Query contacts (advanced)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/query-contacts-by-lookup-key/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Query contacts by lookup keys
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/query-contacts-by-phone-or-sip/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Query contacts by phone or SIP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/query-raw-contacts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Query RawContacts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/insert-contacts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Insert contacts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/update-contacts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Update contacts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/delete-contacts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Delete contacts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/include-only-desired-data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Include only certain fields for read and write operations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/limit-and-offset-queries/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using limit and offset in queries
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Data
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Data
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data/query-data-sets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Query specific data kinds
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data/insert-data-sets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Insert data into new or existing contacts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data/update-data-sets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Update existing sets of data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data/delete-data-sets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Delete existing sets of data
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Custom data
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Custom data
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/query-custom-data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Query custom data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/insert-custom-data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Insert custom data into new or existing contacts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/update-custom-data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Update custom data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/delete-custom-data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Delete custom data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/integrate-custom-data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Integrate custom data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/integrate-custom-data-from-other-apps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Integrate custom data from other apps
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/integrate-googlecontacts-custom-data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Integrate the Google Contacts custom data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/integrate-gender-custom-data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Integrate the Gender custom data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/integrate-handlename-custom-data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Integrate the Handle Name custom data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/integrate-multiple-notes-custom-data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Integrate the Multiple Notes custom data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/integrate-pokemon-custom-data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Integrate the Pokemon custom data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/integrate-rpg-custom-data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Integrate the RPG custom data
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Groups
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Groups
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../groups/query-groups/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Query groups
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../groups/insert-groups/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Insert groups
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../groups/update-groups/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Update groups
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../groups/delete-groups/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Delete groups
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Profile
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Profile
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../profile/query-profile/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Query device owner Contact profile
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../profile/insert-profile/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Insert device owner Contact profile
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../profile/update-profile/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Update device owner Contact profile
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../profile/delete-profile/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Delete device owner Contact profile
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Accounts
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            Accounts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../accounts/query-accounts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Query for Accounts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../accounts/move-raw-contacts-across-accounts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Move RawContacts across Accounts
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    SIM card
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            SIM card
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sim/about-sim-contacts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    About SIM contacts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sim/query-sim-contacts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Query contacts in SIM card
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sim/insert-sim-contacts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Insert contacts into SIM card
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sim/update-sim-contacts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Update contacts in SIM card
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sim/delete-sim-contacts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Delete contacts from SIM card
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
        
          
          <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Blocked numbers
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            Blocked numbers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../blockednumbers/about-blocked-numbers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    About blocked numbers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../blockednumbers/query-blocked-numbers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Query blocked numbers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../blockednumbers/insert-blocked-numbers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Insert blocked numbers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../blockednumbers/delete-blocked-numbers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Delete blocked numbers
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13" >
        
          
          <label class="md-nav__link" for="__nav_13" id="__nav_13_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Permissions
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13">
            <span class="md-nav__icon md-icon"></span>
            Permissions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../permissions/permissions-handling-coroutines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Permissions handling using coroutines
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14" >
        
          
          <label class="md-nav__link" for="__nav_14" id="__nav_14_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Asynchronous work
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_14">
            <span class="md-nav__icon md-icon"></span>
            Asynchronous work
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../async/async-execution-coroutines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Execute work outside of the UI thread using coroutines
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_15" >
        
          
          <label class="md-nav__link" for="__nav_15" id="__nav_15_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UI
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_15">
            <span class="md-nav__icon md-icon"></span>
            UI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ui/integrate-rudimentary-contacts-integrated-ui-components/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Integrate rudimentary contacts ui components
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_16" >
        
          
          <label class="md-nav__link" for="__nav_16" id="__nav_16_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Other
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_16">
            <span class="md-nav__icon md-icon"></span>
            Other
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../other/get-set-remove-contact-raw-contact-photo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Get set remove full-sized and thumbnail contact photos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../other/get-set-clear-contact-raw-contact-options/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Get set contact options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../other/get-set-clear-default-data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Get set clear default Contact data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../other/link-unlink-contacts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Link unlink Contacts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../other/share-contacts-vcard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Share Contacts vCard (.VCF)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../other/convenience-functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Convenience functions
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_17" >
        
          
          <label class="md-nav__link" for="__nav_17" id="__nav_17_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Logging
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_17">
            <span class="md-nav__icon md-icon"></span>
            Logging
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../logging/log-api-input-output/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Log API input and output
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_18" >
        
          
          <label class="md-nav__link" for="__nav_18" id="__nav_18_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Testing
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_18_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_18">
            <span class="md-nav__icon md-icon"></span>
            Testing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../testing/test-contacts-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contacts API Testing
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_19" >
        
          
          <label class="md-nav__link" for="__nav_19" id="__nav_19_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Debug
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_19_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_19">
            <span class="md-nav__icon md-icon"></span>
            Debug
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../debug/debug-contacts-provider-tables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Debug the Contacts Provider tables
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../debug/debug-blockednumber-provider-tables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Debug the BlockedNumber Provider tables
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../debug/debug-sim-contacts-tables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Debug the Sim Contacts table
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dev-notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Developer notes
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#when-to-use-contact-lookup-key-vs-contact-id" class="md-nav__link">
    <span class="md-ellipsis">
      When to use Contact lookup key vs Contact ID?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-get-the-contact-lookup-key" class="md-nav__link">
    <span class="md-ellipsis">
      How to get the Contact lookup key?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-get-contacts-using-lookup-keys" class="md-nav__link">
    <span class="md-ellipsis">
      How to get Contacts using lookup keys?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="How to get Contacts using lookup keys?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-the-lookupquery" class="md-nav__link">
    <span class="md-ellipsis">
      Using the LookupQuery
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-the-query-api" class="md-nav__link">
    <span class="md-ellipsis">
      Using the Query API
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#updating-local-device-only-contacts-and-the-lookup-key" class="md-nav__link">
    <span class="md-ellipsis">
      Updating local, device-only contacts and the lookup key
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#linkingunlinking-contacts-and-the-lookup-key" class="md-nav__link">
    <span class="md-ellipsis">
      Linking/unlinking contacts and the lookup key
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#moving-rawcontacts-between-accounts-and-the-lookup-key" class="md-nav__link">
    <span class="md-ellipsis">
      Moving RawContacts between accounts and the lookup key
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#developer-notes-or-for-advanced-users" class="md-nav__link">
    <span class="md-ellipsis">
      Developer notes (or for advanced users)
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="contact-lookup-key-vs-id">Contact lookup key vs ID<a class="headerlink" href="#contact-lookup-key-vs-id" title="Permanent link">&para;</a></h1>
<p>The <em>Contact ID</em> is a number in the Contacts table that serves as the <em>unique identifier for a row
in the <strong>local</strong> Contacts table</em>. These look like any number used as an ID in a database table. For
example; <code>4</code>, <code>8</code>, <code>15</code>, <code>16</code>, <code>23</code>, <code>42</code>, ...</p>
<p>The <em>Contact lookup key</em> is a string that serves as the <em>unique identifier for an aggregate contact 
in the <strong>local and remote</strong> databases</em>. These look like randomly generated or hashed strings. 
For example; <code>2059i4a27289d88a0a4e7</code>, <code>0r62-2A2C2E</code>, ...</p>
<p>The official documentation for the Contact lookup key is,</p>
<blockquote>
<p>ℹ️ An opaque value that contains hints on how to find the contact if its row id changed as a result
of a sync or aggregation.</p>
</blockquote>
<p>Let's dissect the documentation,</p>
<ul>
<li>"if its row id changed".<ul>
<li>This means that a Person's row ID can change!</li>
</ul>
</li>
<li>"as a result of a sync".<ul>
<li>The Contacts Provider allows sync adapters to modify the local and remote Contacts databases
  to ensure that Contact data is synced per user account.</li>
</ul>
</li>
<li>"as a result of...aggregation".<ul>
<li>Two or more Contacts (along with their constituent RawContacts) can be linked into a single
  Contact. When this happens, those Contacts will be consolidated into a single (existing)
  Contact row. Unlinking will result in the original Contacts prior to linking to have different
  IDs in the Contacts table because the previously deleted row IDs cannot be reused.</li>
</ul>
</li>
</ul>
<p>Unlike the Contact ID, the lookup key's components (it can be more than one if there are more than
one constituent RawContact) is the same across devices (for contacts that are associated
with an Account and are synced). The lookup key points to a person entity rather than just a row 
in a table. It is the unique identifier used by local and remote sync adapters to identify an 
aggregate contact.</p>
<blockquote>
<p>ℹ️ RawContacts do not have a lookup key. It is exclusive to Contacts. However, RawContacts 
associated with an Account that have a SyncAdapter typically have a non-null value in the 
<code>ContactsContract.SyncColumns.SOURCE_ID</code> column, which is typically used as <strong>part</strong> of the 
parent Contact's lookup key. For example, a RawContact that has a sourceId of 6f5de8460f7f227e 
belongs to a Contact that has a lookup key of 2059i6f5de8460f7f227e. Notice that the value of the
sourceId is not exactly the same as the value of the lookup key!</p>
<p>⚠️ Setting the RawContact's <code>SOURCE_ID</code> to a different value will change the lookup key of the
parent Contact, which may break existing shortcuts!</p>
</blockquote>
<h2 id="when-to-use-contact-lookup-key-vs-contact-id">When to use Contact lookup key vs Contact ID?<a class="headerlink" href="#when-to-use-contact-lookup-key-vs-contact-id" title="Permanent link">&para;</a></h2>
<p>Use the <strong>Contact lookup key</strong> when you need to save a reference to a Contact and fetch after some
period of time.</p>
<ul>
<li>Creating and loading shortcuts.</li>
<li>Saving/restoring activity/fragment instance state.</li>
<li>Saving to an external database, preferences, or files.</li>
</ul>
<p>Use the <strong>Contact ID</strong> for everything else.</p>
<ul>
<li>Performing read/write operations in the same function call or session in your app.</li>
<li>Performing read/write operations that require ID (e.g. Contact photo and options).</li>
</ul>
<p>The reason why lookup keys are used as long-term links to contacts is because Contact IDs and the
lookup keys themselves may change over time due to linking/unlinking, local contact updates, and
syncing adapter operations. Lookup keys provide the ability to retrieve contacts even when its ID
or lookup key itself changes. </p>
<h2 id="how-to-get-the-contact-lookup-key">How to get the Contact lookup key?<a class="headerlink" href="#how-to-get-the-contact-lookup-key" title="Permanent link">&para;</a></h2>
<p>Lookup keys are included in queries by default but are not required. This means that if you use do
not invoke the <code>include</code> function in query APIs, then it will be included in the returned Contacts.
However, if you do specify fields to include by invoking the <code>include</code> function, then you must 
explicitly specify the lookup key,</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="p">.</span><span class="na">include</span><span class="p">(</span><span class="n">Fields</span><span class="p">.</span><span class="na">Contact</span><span class="p">.</span><span class="na">LookupKey</span><span class="p">)</span>
</span></code></pre></div>
<p><code>Contact</code>s instances returned by the query will contain a value in the <code>Contact.lookupKey</code> property.</p>
<p>For more info, read <a href="../../basics/include-only-desired-data/">Include only certain fields for read and write operations</a>.</p>
<h2 id="how-to-get-contacts-using-lookup-keys">How to get Contacts using lookup keys?<a class="headerlink" href="#how-to-get-contacts-using-lookup-keys" title="Permanent link">&para;</a></h2>
<p>There are several ways to do this...</p>
<h4 id="using-the-lookupquery">Using the <code>LookupQuery</code><a class="headerlink" href="#using-the-lookupquery" title="Permanent link">&para;</a></h4>
<p>Using this API allows you to get contacts even if their ID or lookup key itself changes.</p>
<p>To get a contact using a lookup key,</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kd">val</span><span class="w"> </span><span class="nv">contacts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lookupQuery</span><span class="p">.</span><span class="na">whereLookupKeyMatches</span><span class="p">(</span><span class="n">lookupKey</span><span class="p">).</span><span class="na">find</span><span class="p">()</span>
</span></code></pre></div>
<p>For optimization purposes, include the last known ID,</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kd">val</span><span class="w"> </span><span class="nv">contacts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lookupQuery</span><span class="p">.</span><span class="na">whereLookupKeyWithIdMatches</span><span class="p">(</span><span class="n">LookupQuery</span><span class="p">.</span><span class="na">LookupKeyWithId</span><span class="p">(</span><span class="n">lookupKey</span><span class="p">,</span><span class="w"> </span><span class="n">contactId</span><span class="p">)).</span><span class="na">find</span><span class="p">()</span>
</span></code></pre></div>
<blockquote>
<p>ℹ️ For more info, read <a href="../../basics/query-contacts-by-lookup-key/">Query contacts by lookup key</a>.</p>
</blockquote>
<h4 id="using-the-query-api">Using the <code>Query</code> API<a class="headerlink" href="#using-the-query-api" title="Permanent link">&para;</a></h4>
<p>You may also use the <code>Query</code> API to achieve a similar result. However, in this case, using the 
Contact ID is necessary in order to ensure the lookup succeeds (in case the lookup key changes).</p>
<p>Use the <code>decomposedLookupKeys</code> functions in <code>contacts.core.util.ContactLookupKey.kt</code> to get contacts 
by lookup key and id,</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="kd">val</span><span class="w"> </span><span class="nv">contacts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">query</span><span class="p">.</span><span class="na">where</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">(</span><span class="n">decomposedLookupKeys</span><span class="p">(</span><span class="n">lookupKey</span><span class="p">)</span><span class="w"> </span><span class="n">whereOr</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Contact</span><span class="p">.</span><span class="na">LookupKey</span><span class="w"> </span><span class="n">contains</span><span class="w"> </span><span class="nb">it</span><span class="w"> </span><span class="p">})</span><span class="o">?.</span><span class="na">or</span><span class="p">(</span><span class="n">Contact</span><span class="p">.</span><span class="na">Id</span><span class="w"> </span><span class="n">equalTo</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">}.</span><span class="na">find</span><span class="p">()</span>
</span></code></pre></div>
<p>Or use the <code>lookupKeyIn</code> extensions in <code>contacts.core.util.ContactLookupKey.kt</code> to get contacts
by lookup key and id,</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="kd">val</span><span class="w"> </span><span class="nv">contacts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">query</span><span class="p">.</span><span class="na">where</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Contact</span><span class="p">.</span><span class="na">lookupKeyIn</span><span class="p">(</span><span class="n">lookupKeys</span><span class="p">)</span><span class="o">?.</span><span class="na">or</span><span class="p">(</span><span class="n">Contact</span><span class="p">.</span><span class="na">Id</span><span class="w"> </span><span class="n">equalTo</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">}.</span><span class="na">find</span><span class="p">()</span>
</span></code></pre></div>
<blockquote>
<p>ℹ️ For an explanation on why you should use those functions instead of the lookup key directly,
read the function documentation.</p>
<p>⚠️ Queries that only use the lookup key may fail to get a contact whose lookup key has changed.
On the other hand, queries that only use the Contact ID may fail to get a contact whose ID has
changed. You must use both lookup key and ID when using the <code>Query</code> API. If you only have the 
lookup key, use the <code>LookupQuery</code> API.</p>
<p>ℹ️ Note that if the lookup key or id is a reference to a linked Contact (a Contact with two or more
constituent RawContacts), and the linked Contact is unlinked, then the query will return
multiple Contacts.</p>
<p>ℹ️ For more info, read <a href="../../basics/query-contacts-advanced/">Query contacts (advanced)</a>.</p>
</blockquote>
<h2 id="updating-local-device-only-contacts-and-the-lookup-key">Updating local, device-only contacts and the lookup key<a class="headerlink" href="#updating-local-device-only-contacts-and-the-lookup-key" title="Permanent link">&para;</a></h2>
<p>The ContactsProvider may assign a different value to the Contact lookup key if it's constituent
RawContacts that are not associated with an Account (local, unsynced, source id is null) gets its
primary display name source updated. <em>Display name sources are specified in <code>ContactsContract.DisplayNameSources</code>.
In order of increasing priority; email, phone, organization, nickname, and name.</em></p>
<p>However, the IDs remain the same.</p>
<p>Therefore, it is still possible to get the contacts after updating using IDs.</p>
<h2 id="linkingunlinking-contacts-and-the-lookup-key">Linking/unlinking contacts and the lookup key<a class="headerlink" href="#linkingunlinking-contacts-and-the-lookup-key" title="Permanent link">&para;</a></h2>
<p>Linking and unlinking RawContacts will cause the lookup key to change as the RawContact's source ids
get combined and separated respectively. However, the intrinsic values contained within the lookup 
key remains the same. The Contact IDs may also change as Contacts get deleted and created when 
linking and unlinking respectively.</p>
<p>Therefore, it is still possible to get the contacts after linking/unlinking using the lookup key.</p>
<p>For example, using the default AOSP Contacts app or the Google Contacts app...</p>
<ol>
<li>View a contact's details.</li>
<li>Create a shortcut to it in the home screen (launcher).<ul>
<li>This shortcut uses the Contact lookup key (not the ID) to form a lookup URI.</li>
</ul>
</li>
<li>Link the contact to another contact.</li>
<li>Tap the shortcut in the home screen (launcher).</li>
<li>Unlink the contact.</li>
<li>Tap the shortcut in the home screen (launcher).</li>
</ol>
<p>In both cases, the shortcut successfully opens the correct aggregate Contact.</p>
<blockquote>
<p>ℹ️ For more info on linking/unlinking, read <a href="../../other/link-unlink-contacts/">Link unlink Contacts</a>.</p>
</blockquote>
<h2 id="moving-rawcontacts-between-accounts-and-the-lookup-key">Moving RawContacts between accounts and the lookup key<a class="headerlink" href="#moving-rawcontacts-between-accounts-and-the-lookup-key" title="Permanent link">&para;</a></h2>
<p>Moving a RawContact to a different Account will cause the lookup key and IDs to change.</p>
<blockquote>
<p>ℹ️ Note that in these cases, the changes to the lookup key will only be applied after the Contacts
Provider and sync adapters sync the changes. This means that the local changes are not immediately
applied. For more info, read <a href="../sync-contact-data/">Sync contact data across devices</a>.</p>
</blockquote>
<p>Therefore, it is no longer possible to get the contacts after moving using the lookup key or IDs.</p>
<p>For example, using the default AOSP Contacts app or the Google Contacts app...</p>
<ol>
<li>View a contact's details.</li>
<li>Create a shortcut to it in the home screen (launcher).<ul>
<li>This shortcut uses the Contact lookup key (not the ID) to form a lookup URI.</li>
</ul>
</li>
<li>Move the RawContact to a different Account.</li>
<li>Tap the shortcut in the home screen (launcher).</li>
</ol>
<p>Both Contacts apps will say that the Contact no longer exist or has been removed. This is not a bug.
It is expected behavior due to the way the Contacts Provider works.</p>
<blockquote>
<p>ℹ️ For more info, read <a href="../../accounts/move-raw-contacts-across-accounts/">Move RawContacts across Accounts</a>.</p>
</blockquote>
<hr />
<h2 id="developer-notes-or-for-advanced-users">Developer notes (or for advanced users)<a class="headerlink" href="#developer-notes-or-for-advanced-users" title="Permanent link">&para;</a></h2>
<blockquote>
<p>ℹ️ The following section are note from developers of this library for other developers. It is copied
from the <a href="../../dev-notes/">DEV_NOTES</a>. You may still read the following as a consumer of the library
in case you need deeper insight.</p>
</blockquote>
<p>The <code>Contacts._ID</code> is the unique identifier for the row in the Contacts table. The
<code>Contacts.LOOKUP_KEY</code> is the unique identifier for an aggregate Contact (a person). The <code>_ID</code> may
change due to aggregation and sync. The same goes for the <code>LOOKUP_KEY</code> but unlike the <code>ID</code> it may 
still be used to find the aggregate contact.</p>
<p>Unlike the Contact ID, the lookup key is the same across devices (for contacts that are associated 
with an Account and are synced).</p>
<blockquote>
<p>ℹ️ The following investigation was done with a much larger data set. I has been simplified here 
for brevity.</p>
</blockquote>
<p>Let's take a look at the following Contacts and RawContacts table rows,</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>#### Contacts table
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>Contact id: 55, lookupKey: 0r55-2E4644502A2E50563A503840462E2A404C2A562E4644502A2E50, displayNamePrimary: Contact With Local RawContact
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>Contact id: 56, lookupKey: 2059i6f5de8460f7f227e, displayNamePrimary: Contact With Synced RawContact
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>#### RawContacts table
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>RawContact id: 55, contactId: 55, sourceId: null, displayNamePrimary: Contact With Local RawContact
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>RawContact id: 56, contactId: 56, sourceId: 6f5de8460f7f227e, displayNamePrimary: Contact With Synced RawContact
</span></code></pre></div>
<p>There are two Contacts each having one RawContact.</p>
<p>Notice that the lookup keys are a bit different.</p>
<ul>
<li>Contact With Local RawContact: 0r55-2E4644502A2E50563A503840462E2A404C2A562E4644502A2E50</li>
<li>Contact With Synced RawContact: 2059i6f5de8460f7f227e</li>
</ul>
<p>The Contact with synced RawContact uses the RawContact's <code>SOURCE_ID</code> as <strong>part</strong> of its lookup key.
Notice that the <code>sourceId</code> value (i.e. 6f5de8460f7f227e) is NOT exactly the same as the <code>lookupKey</code>
(i.e. 2059i6f5de8460f7f227e)!</p>
<p>The Contact with unsynced, device-only, local RawContact has a much longer (or shorter e.g. 0r62-2A2C2E)
lookup key and starts with "0r<RawContact ID>-" and all characters after it are in uppercase. The
other thing to notice is that the "55" in "0r55-" seems to be the same as the RawContact ID (I did
a bit more experiments than what is written in these notes to confirm that it is indeed the
RawContact ID and not the Contact ID). We probably don't need to worry about these details though
the Contacts Provider probably uses these things internally. We also should not rely on it.</p>
<p>In any case, it is safe to assume that the <strong>Contact lookup key is a reference to a RawContact</strong>
(or reference to more than one constituent RawContact when multiple RawContacts are linked). Again,
an internal Contacts Provider detail we should not rely on BUT is probably relevant when implementing
sync adapters.</p>
<p><strong>When we link</strong> the two, we get...</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>Contact id: 55, lookupKey: 0r55-2E4644502A2E50563A503840462E2A404C2A562E4644502A2E50.2059i6f5de8460f7f227e, displayNamePrimary: Contact With Synced RawContact
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>#### RawContacts table
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>RawContact id: 55, contactId: 55, sorceId: null, displayNamePrimary: Contact With Local RawContact
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>RawContact id: 56, contactId: 55, sourceId: 6f5de8460f7f227e, displayNamePrimary: Contact With Synced RawContact
</span></code></pre></div>
<p>Notice,</p>
<ul>
<li>Contact with ID 56 has been deleted.</li>
<li>Contact with ID 55 still exist with the <strong>lookup keys</strong> of both Contact 55 and 56 <strong>combined separated by a "."</strong>.<ul>
<li>This holds true in cases where two or more local-only or non-local-only RawContacts are linked.</li>
</ul>
</li>
<li>RawContacts remain unchanged except reference to Contact 56 has been replaced with 55.</li>
<li>The primary display name of Contact 55 came from RawContact 55 prior to the link and now comes
  from RawContact 56 after the link.<ul>
<li>This primary name resolution is probably irrelevant so pay no attention to it.</li>
</ul>
</li>
</ul>
<p>The most important part to notice is that the lookup keys get combined.</p>
<p>Given that the lookup key of the deleted Contact 56 still lives on, it is possible to get
the linked Contact 55 using the lookup key of Contact 56 using our standard query APIs!</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="p">.</span><span class="na">where</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Contact</span><span class="p">.</span><span class="na">LookupKey</span><span class="w"> </span><span class="n">contains</span><span class="w"> </span><span class="n">lookupKey</span><span class="w"> </span><span class="p">}</span>
</span></code></pre></div>
<p>The above is correct as long as these assumptions hold true;</p>
<ul>
<li>the lookup key is unique</li>
<li>there is no lookup key that can contain a shorter lookup key<ul>
<li>the Contact ID fails this test because a smaller number is contained in a larger number</li>
<li>synced contacts have shorter lookup keys than local contacts. However, local contacts'
  lookup keys are capitalized whereas synced contact are not. Also, there seems to be other
  differences in pattern between long and short lookup keys. It should be safe to make this
  assumption.</li>
</ul>
</li>
</ul>
<p>Until the community finds that this assumption is flawed, we'll assume that it is true! </p>
<p><strong>When we unlink</strong>, we get...</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>#### Contacts table
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>Contact id: 55, lookupKey: 2059i6f5de8460f7f227e, displayNamePrimary: Contact With Synced RawContact
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>Contact id: 58, lookupKey: 0r55-2E4644502A2E50563A503840462E2A404C2A562E4644502A2E50, displayNamePrimary: Contact With Local RawContact
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>#### RawContacts table
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>RawContact id: 55, contactId: 58, sourceId: null, displayNamePrimary: Contact With Local RawContact
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>RawContact id: 56, contactId: 55, sourceId: 6f5de8460f7f227e, displayNamePrimary: Contact With Synced RawContact
</span></code></pre></div>
<p>Notice,</p>
<ul>
<li>A new Contact row with ID of 58 is created.</li>
<li>The lookup keys are separated and distributed between Contact 55 and 58.</li>
<li>RawContact 55 Contact reference has been set to Contact 58.</li>
</ul>
<p>Let's compare the Contact-RawContact relationship before and after linking and then unlinking.</p>
<table>
<thead>
<tr>
<th></th>
<th><strong>Contact ID</strong></th>
<th><strong>Lookup Key</strong></th>
<th><strong>RawContact.Contact ID</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Before</strong></td>
<td>55,<br>56</td>
<td>0r55-2E4644502A2E50563A503840462E2A404C2A562E4644502A2E50,<br>2059i6f5de8460f7f227e</td>
<td>55,<br>56</td>
</tr>
<tr>
<td><strong>After</strong></td>
<td>55,<br>58</td>
<td>2059i6f5de8460f7f227e,<br>0r55-2E4644502A2E50563A503840462E2A404C2A562E4644502A2E50</td>
<td>58,<br>55</td>
</tr>
</tbody>
</table>
<p>Notice,</p>
<ul>
<li>Contact ID 55 swapped lookup keys with the former Contact 56 (now 58).</li>
<li>RawContact ID 55 swapped Contact reference with RawContact 56.</li>
</ul>
<p>The Contact IDs and lookup keys got shuffled BUT the Contact-RawContact relationship remains the
same if using the lookup keys as point of reference! Here is another way to look at the table,
using the lookup key as the constant...</p>
<table>
<thead>
<tr>
<th><strong>Lookup Key</strong></th>
<th><strong>Before</strong></th>
<th><strong>After</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>0r55-2E4644502A2E50563A503840462E2A404C2A562E4644502A2E50</td>
<td>Contact 55,<br>RawContact 55</td>
<td>Contact 58,<br>RawContact 55</td>
</tr>
<tr>
<td>2059i6f5de8460f7f227e</td>
<td>Contact 56,<br>RawContact 56</td>
<td>Contact 55,<br>RawContact 56</td>
</tr>
</tbody>
</table>
<p>Notice that the indirect relationship between the lookup key and RawContacts remains the same
before and after the link-unlink even though the Contact IDs changed.</p>
<blockquote>
<p>ℹ️ As mentioned earlier in this section, the "55" in "0r55-" seems to be referencing the 
RawContact ID. In other words, since local RawContacts are not synced or tracked in a remote 
database where Contacts -&gt; RawContacts mappings exist, the Contacts Provider most likely uses this
"0r<RawContact ID>-" pattern to make the connection. This is not really relevant for us as we are
not relying on this mechanism. I'm just pointing out my observations, which could be incorrect.</p>
</blockquote>
<p>This means that...</p>
<ul>
<li>If users of this library saved a reference Contact ID 55, then a link-unlink (or sync adapter
  functions) occur.<ul>
<li>Getting Contact by ID 55 will result in the RawContact-Data of the former Contact 56 to be
  returned. This is a bug! Same goes if users saved a reference to Contact ID 56.</li>
</ul>
</li>
<li>If users of this library saved a reference to the lookup keys, then a link-unlink (or sync adapter
  functions) occur.<ul>
<li>Getting Contact by lookup key will result in the correct RawContact-Data to be returned.</li>
</ul>
</li>
</ul>
<p>So when to use Contact ID vs lookup key?</p>
<ul>
<li>Lookup key: for a reference to a Contact that needs to be loaded after some period of time.<ul>
<li>Creating and loading shortcuts.</li>
<li>Saving/restoring activity/fragment instance state.</li>
<li>Saving to an external database, preferences, or files.</li>
</ul>
</li>
<li>ID: for everything else.<ul>
<li>Performing read/write operations in the same function call or session in your app.</li>
<li>Performing read/write operations that require ID (e.g. Contact photo and options).</li>
</ul>
</li>
</ul>
<p>Another thing to check is what happens when associating a local RawContact to an Account (move from
device to Account) and vice versa. Is the lookup key of the Contact affected? Yes. The Contact,
RawContacts, and Data rows have been deleted and new rows have been created to replace them! This
means that all IDs have changed. The Contact lookup key and the RawContacts source ID also changed.</p>
<p><strong>Local contact's lookup key may change but row ID remain the same!</strong></p>
<p>The ContactsProvider may assign a different value to the Contact lookup key if it's constituent
RawContacts that are not associated with an Account (local, unsynced, source id is null) gets its
primary display name source updated. Display name sources are specified in <code>ContactsContract.DisplayNameSources</code>.
In order of increasing priority; email, phone, organization, nickname, and name.</p>
<p>This suggests that the lookup key for local contacts depends on the primary display name. It 
probably uses its hashed value as the value of the lookup key or something like that.</p>
<p>To account for this scenario, ContactsContract provides <code>Contacts.CONTENT_LOOKUP_URI</code> and 
<code>getLookupUri</code>...</p>
<div class="language-java highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="cm">/**</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="cm"> * A content:// style URI for this table that should be used to create</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="cm"> * shortcuts or otherwise create long-term links to contacts. This URI</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="cm"> * should always be followed by a &quot;/&quot; and the contact&#39;s {@link #LOOKUP_KEY}.</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="cm"> * It can optionally also have a &quot;/&quot; and last known contact ID appended after</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="cm"> * that. This &quot;complete&quot; format is an important optimization and is highly recommended.</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="cm"> * &lt;p&gt;</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="cm"> * As long as the contact&#39;s row ID remains the same, this URI is</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="cm"> * equivalent to {@link #CONTENT_URI}. If the contact&#39;s row ID changes</span>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="cm"> * as a result of a sync or aggregation, this URI will look up the</span>
</span><span id="__span-9-11"><a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a><span class="cm"> * contact using indirect information (sync IDs or constituent raw</span>
</span><span id="__span-9-12"><a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a><span class="cm"> * contacts).</span>
</span><span id="__span-9-13"><a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a><span class="cm"> * &lt;p&gt;</span>
</span><span id="__span-9-14"><a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a><span class="cm"> * Lookup key should be appended unencoded - it is stored in the encoded</span>
</span><span id="__span-9-15"><a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a><span class="cm"> * form, ready for use in a URI.</span>
</span><span id="__span-9-16"><a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a><span class="cm"> */</span>
</span><span id="__span-9-17"><a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Uri</span><span class="w"> </span><span class="n">CONTENT_LOOKUP_URI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Uri</span><span class="p">.</span><span class="na">withAppendedPath</span><span class="p">(</span><span class="n">CONTENT_URI</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;lookup&quot;</span><span class="p">);</span>
</span><span id="__span-9-18"><a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a>
</span><span id="__span-9-19"><a id="__codelineno-9-19" name="__codelineno-9-19" href="#__codelineno-9-19"></a><span class="cm">/**</span>
</span><span id="__span-9-20"><a id="__codelineno-9-20" name="__codelineno-9-20" href="#__codelineno-9-20"></a><span class="cm"> * Build a {@link #CONTENT_LOOKUP_URI} lookup {@link Uri} using the</span>
</span><span id="__span-9-21"><a id="__codelineno-9-21" name="__codelineno-9-21" href="#__codelineno-9-21"></a><span class="cm"> * given {@link ContactsContract.Contacts#_ID} and {@link #LOOKUP_KEY}.</span>
</span><span id="__span-9-22"><a id="__codelineno-9-22" name="__codelineno-9-22" href="#__codelineno-9-22"></a><span class="cm"> * &lt;p&gt;</span>
</span><span id="__span-9-23"><a id="__codelineno-9-23" name="__codelineno-9-23" href="#__codelineno-9-23"></a><span class="cm"> * Returns null if unable to construct a valid lookup URI from the</span>
</span><span id="__span-9-24"><a id="__codelineno-9-24" name="__codelineno-9-24" href="#__codelineno-9-24"></a><span class="cm"> * provided parameters.</span>
</span><span id="__span-9-25"><a id="__codelineno-9-25" name="__codelineno-9-25" href="#__codelineno-9-25"></a><span class="cm"> */</span>
</span><span id="__span-9-26"><a id="__codelineno-9-26" name="__codelineno-9-26" href="#__codelineno-9-26"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Uri</span><span class="w"> </span><span class="nf">getLookupUri</span><span class="p">(</span><span class="kt">long</span><span class="w"> </span><span class="n">contactId</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">lookupKey</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-27"><a id="__codelineno-9-27" name="__codelineno-9-27" href="#__codelineno-9-27"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">TextUtils</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">(</span><span class="n">lookupKey</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-28"><a id="__codelineno-9-28" name="__codelineno-9-28" href="#__codelineno-9-28"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
</span><span id="__span-9-29"><a id="__codelineno-9-29" name="__codelineno-9-29" href="#__codelineno-9-29"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-9-30"><a id="__codelineno-9-30" name="__codelineno-9-30" href="#__codelineno-9-30"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">ContentUris</span><span class="p">.</span><span class="na">withAppendedId</span><span class="p">(</span><span class="n">Uri</span><span class="p">.</span><span class="na">withAppendedPath</span><span class="p">(</span><span class="n">Contacts</span><span class="p">.</span><span class="na">CONTENT_LOOKUP_URI</span><span class="p">,</span><span class="w"> </span><span class="n">lookupKey</span><span class="p">),</span><span class="w"> </span><span class="n">contactId</span><span class="p">);</span>
</span><span id="__span-9-31"><a id="__codelineno-9-31" name="__codelineno-9-31" href="#__codelineno-9-31"></a><span class="p">}</span>
</span></code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "content.code.select"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>