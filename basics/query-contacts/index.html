
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Android Contacts API Library for Kotlin and Java.">
      
      
        <meta name="author" content="Vandolf Estrellado">
      
      
        <link rel="canonical" href="https://vestrel00.github.io/contacts-android/basics/query-contacts/">
      
      
        <link rel="prev" href="../../entities/redact-apis-and-entities/">
      
      
        <link rel="next" href="../query-contacts-advanced/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.41">
    
    
      
        <title>Query contacts - Contacts, Reborn</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.0253249f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"JetBrains Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-orange" data-md-color-accent="red">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#query-contacts" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Contacts, Reborn" class="md-header__button md-logo" aria-label="Contacts, Reborn" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 0H4v2h16zM4 24h16v-2H4zM20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2m-8 2.75A2.25 2.25 0 0 1 14.25 9 2.25 2.25 0 0 1 12 11.25 2.25 2.25 0 0 1 9.75 9 2.25 2.25 0 0 1 12 6.75M17 17H7v-1.5c0-1.67 3.33-2.5 5-2.5s5 .83 5 2.5z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Contacts, Reborn
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Query contacts
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="deep-orange" data-md-color-accent="red"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="deep-orange" data-md-color-accent="red"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/vestrel00/contacts-android" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    vestrel00/contacts-android
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Contacts, Reborn" class="md-nav__button md-logo" aria-label="Contacts, Reborn" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 0H4v2h16zM4 24h16v-2H4zM20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2m-8 2.75A2.25 2.25 0 0 1 14.25 9 2.25 2.25 0 0 1 12 11.25 2.25 2.25 0 0 1 9.75 9 2.25 2.25 0 0 1 12 6.75M17 17H7v-1.5c0-1.67 3.33-2.5 5-2.5s5 .83 5 2.5z"/></svg>

    </a>
    Contacts, Reborn
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/vestrel00/contacts-android" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    vestrel00/contacts-android
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cheatsheet
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Setup
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Setup
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../setup/installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../setup/setup-contacts-api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contacts API Setup
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Entities
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Entities
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../entities/about-api-entities/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API entities
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../entities/about-blank-contacts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Blank contacts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../entities/about-blank-data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Blank data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../entities/about-local-contacts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Local (device-only) contacts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../entities/about-contact-lookup-key/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contact lookup key vs ID
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../entities/sync-contact-data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sync contact data across devices
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../entities/redact-apis-and-entities/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Redact entities and API input and output in production
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Basics
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Basics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Query contacts
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Query contacts
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#a-basic-query" class="md-nav__link">
    <span class="md-ellipsis">
      A basic query
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#specifying-accounts" class="md-nav__link">
    <span class="md-ellipsis">
      Specifying Accounts
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#specifying-groups" class="md-nav__link">
    <span class="md-ellipsis">
      Specifying Groups
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#including-only-specific-data" class="md-nav__link">
    <span class="md-ellipsis">
      Including only specific data
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Including only specific data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optimize-your-queries" class="md-nav__link">
    <span class="md-ellipsis">
      Optimize your queries
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ordering" class="md-nav__link">
    <span class="md-ellipsis">
      Ordering
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#limiting-and-offsetting" class="md-nav__link">
    <span class="md-ellipsis">
      Limiting and offsetting
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#executing-the-query" class="md-nav__link">
    <span class="md-ellipsis">
      Executing the query
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cancelling-the-query" class="md-nav__link">
    <span class="md-ellipsis">
      Cancelling the query
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performing-the-query-asynchronously" class="md-nav__link">
    <span class="md-ellipsis">
      Performing the query asynchronously
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performing-the-query-with-permission" class="md-nav__link">
    <span class="md-ellipsis">
      Performing the query with permission
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-data-support" class="md-nav__link">
    <span class="md-ellipsis">
      Custom data support
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-the-match-and-wherepartiallymatches-functions-to-specify-matching-criteria" class="md-nav__link">
    <span class="md-ellipsis">
      Using the match and wherePartiallyMatches functions to specify matching criteria
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Using the match and wherePartiallyMatches functions to specify matching criteria">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#matchany" class="md-nav__link">
    <span class="md-ellipsis">
      Match.ANY
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matchphone" class="md-nav__link">
    <span class="md-ellipsis">
      Match.PHONE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matchemail" class="md-nav__link">
    <span class="md-ellipsis">
      Match.EMAIL
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#developer-notes-or-for-advanced-users" class="md-nav__link">
    <span class="md-ellipsis">
      Developer notes (or for advanced users)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Developer notes (or for advanced users)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comparison-table" class="md-nav__link">
    <span class="md-ellipsis">
      Comparison table
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../query-contacts-advanced/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Query contacts (advanced)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../query-contacts-by-lookup-key/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Query contacts by lookup keys
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../query-contacts-by-phone-or-sip/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Query contacts by phone or SIP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../query-raw-contacts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Query RawContacts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../insert-contacts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Insert contacts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../update-contacts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Update contacts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../delete-contacts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Delete contacts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../include-only-desired-data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Include only certain fields for read and write operations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../limit-and-offset-queries/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using limit and offset in queries
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Data
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Data
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data/query-data-sets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Query specific data kinds
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data/insert-data-sets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Insert data into new or existing contacts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data/update-data-sets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Update existing sets of data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data/delete-data-sets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Delete existing sets of data
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Custom data
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Custom data
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/query-custom-data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Query custom data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/insert-custom-data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Insert custom data into new or existing contacts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/update-custom-data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Update custom data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/delete-custom-data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Delete custom data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/integrate-custom-data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Integrate custom data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/integrate-custom-data-from-other-apps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Integrate custom data from other apps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/integrate-googlecontacts-custom-data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Integrate the Google Contacts custom data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/integrate-gender-custom-data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Integrate the Gender custom data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/integrate-handlename-custom-data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Integrate the Handle Name custom data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/integrate-multiple-notes-custom-data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Integrate the Multiple Notes custom data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/integrate-pokemon-custom-data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Integrate the Pokemon custom data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../customdata/integrate-rpg-custom-data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Integrate the RPG custom data
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Groups
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Groups
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../groups/query-groups/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Query groups
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../groups/insert-groups/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Insert groups
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../groups/update-groups/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Update groups
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../groups/delete-groups/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Delete groups
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Profile
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Profile
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../profile/query-profile/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Query device owner Contact profile
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../profile/insert-profile/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Insert device owner Contact profile
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../profile/update-profile/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Update device owner Contact profile
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../profile/delete-profile/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Delete device owner Contact profile
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Accounts
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            Accounts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../accounts/query-accounts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Query for Accounts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../accounts/move-raw-contacts-across-accounts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Move RawContacts across Accounts
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    SIM card
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            SIM card
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sim/about-sim-contacts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About SIM contacts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sim/query-sim-contacts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Query contacts in SIM card
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sim/insert-sim-contacts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Insert contacts into SIM card
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sim/update-sim-contacts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Update contacts in SIM card
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sim/delete-sim-contacts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Delete contacts from SIM card
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
        
          
          <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Blocked numbers
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            Blocked numbers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../blockednumbers/about-blocked-numbers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About blocked numbers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../blockednumbers/query-blocked-numbers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Query blocked numbers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../blockednumbers/insert-blocked-numbers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Insert blocked numbers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../blockednumbers/delete-blocked-numbers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Delete blocked numbers
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13" >
        
          
          <label class="md-nav__link" for="__nav_13" id="__nav_13_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Permissions
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13">
            <span class="md-nav__icon md-icon"></span>
            Permissions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../permissions/permissions-handling-coroutines/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Permissions handling using coroutines
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14" >
        
          
          <label class="md-nav__link" for="__nav_14" id="__nav_14_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Asynchronous work
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_14">
            <span class="md-nav__icon md-icon"></span>
            Asynchronous work
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../async/async-execution-coroutines/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Execute work outside of the UI thread using coroutines
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_15" >
        
          
          <label class="md-nav__link" for="__nav_15" id="__nav_15_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    UI
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_15">
            <span class="md-nav__icon md-icon"></span>
            UI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ui/integrate-rudimentary-contacts-integrated-ui-components/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Integrate rudimentary contacts ui components
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_16" >
        
          
          <label class="md-nav__link" for="__nav_16" id="__nav_16_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Other
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_16">
            <span class="md-nav__icon md-icon"></span>
            Other
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../other/get-set-remove-contact-raw-contact-photo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Get set remove full-sized and thumbnail contact photos
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../other/get-set-clear-contact-raw-contact-options/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Get set contact options
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../other/get-set-clear-default-data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Get set clear default Contact data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../other/link-unlink-contacts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Link unlink Contacts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../other/share-contacts-vcard/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Share Contacts vCard (.VCF)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../other/convenience-functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Convenience functions
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_17" >
        
          
          <label class="md-nav__link" for="__nav_17" id="__nav_17_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Logging
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_17">
            <span class="md-nav__icon md-icon"></span>
            Logging
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../logging/log-api-input-output/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Log API input and output
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_18" >
        
          
          <label class="md-nav__link" for="__nav_18" id="__nav_18_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Testing
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_18_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_18">
            <span class="md-nav__icon md-icon"></span>
            Testing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../testing/test-contacts-api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contacts API Testing
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_19" >
        
          
          <label class="md-nav__link" for="__nav_19" id="__nav_19_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Debug
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_19_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_19">
            <span class="md-nav__icon md-icon"></span>
            Debug
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../debug/debug-contacts-provider-tables/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Debug the Contacts Provider tables
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../debug/debug-blockednumber-provider-tables/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Debug the BlockedNumber Provider tables
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../debug/debug-sim-contacts-tables/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Debug the Sim Contacts table
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dev-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Developer notes
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#a-basic-query" class="md-nav__link">
    <span class="md-ellipsis">
      A basic query
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#specifying-accounts" class="md-nav__link">
    <span class="md-ellipsis">
      Specifying Accounts
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#specifying-groups" class="md-nav__link">
    <span class="md-ellipsis">
      Specifying Groups
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#including-only-specific-data" class="md-nav__link">
    <span class="md-ellipsis">
      Including only specific data
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Including only specific data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optimize-your-queries" class="md-nav__link">
    <span class="md-ellipsis">
      Optimize your queries
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ordering" class="md-nav__link">
    <span class="md-ellipsis">
      Ordering
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#limiting-and-offsetting" class="md-nav__link">
    <span class="md-ellipsis">
      Limiting and offsetting
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#executing-the-query" class="md-nav__link">
    <span class="md-ellipsis">
      Executing the query
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cancelling-the-query" class="md-nav__link">
    <span class="md-ellipsis">
      Cancelling the query
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performing-the-query-asynchronously" class="md-nav__link">
    <span class="md-ellipsis">
      Performing the query asynchronously
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performing-the-query-with-permission" class="md-nav__link">
    <span class="md-ellipsis">
      Performing the query with permission
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-data-support" class="md-nav__link">
    <span class="md-ellipsis">
      Custom data support
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-the-match-and-wherepartiallymatches-functions-to-specify-matching-criteria" class="md-nav__link">
    <span class="md-ellipsis">
      Using the match and wherePartiallyMatches functions to specify matching criteria
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Using the match and wherePartiallyMatches functions to specify matching criteria">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#matchany" class="md-nav__link">
    <span class="md-ellipsis">
      Match.ANY
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matchphone" class="md-nav__link">
    <span class="md-ellipsis">
      Match.PHONE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matchemail" class="md-nav__link">
    <span class="md-ellipsis">
      Match.EMAIL
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#developer-notes-or-for-advanced-users" class="md-nav__link">
    <span class="md-ellipsis">
      Developer notes (or for advanced users)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Developer notes (or for advanced users)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comparison-table" class="md-nav__link">
    <span class="md-ellipsis">
      Comparison table
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="query-contacts">Query contacts<a class="headerlink" href="#query-contacts" title="Permanent link">&para;</a></h1>
<p>This library provides the <code>BroadQuery</code> API that allows you to get the exact same search results
as the AOSP Contacts app! This query lets the Contacts Provider perform the search using its own
custom matching algorithm via the <code>wherePartiallyMatches</code> function. This type of query is the basis
of an app that does a broad search of the Contacts Provider. The technique is useful for apps that
want to implement functionality similar to the People app's contact list screen.</p>
<p>An instance of the <code>BroadQuery</code> API is obtained by,</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kd">val</span><span class="w"> </span><span class="nv">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Contacts</span><span class="p">(</span><span class="n">context</span><span class="p">).</span><span class="na">broadQuery</span><span class="p">()</span>
</span></code></pre></div>
<blockquote>
<p> For a more granular, advanced queries, use the <code>Query</code> API; <a href="../query-contacts-advanced/">Query contacts (advanced)</a>.</p>
<p> To query contacts using lookup keys, read <a href="../query-contacts-by-lookup-key/">Query contacts by lookup key</a>.</p>
<p> For specialized matching of phone numbers and SIP addresses, use the <code>PhoneLookupQuery</code> API; <a href="../query-contacts-by-phone-or-sip/">Query contacts by phone or SIP</a>.</p>
<p> If you want to query RawContacts directly instead of Contacts, read <a href="../query-raw-contacts/">Query RawContacts</a>.</p>
<p> If you want to query Data directly instead of Contacts, read <a href="../../data/query-data-sets/">Query specific data kinds</a>.</p>
<p> If you want to get the device owner Contact Profile, read <a href="../../profile/query-profile/">Query device owner Contact profile</a>.</p>
</blockquote>
<h2 id="a-basic-query">A basic query<a class="headerlink" href="#a-basic-query" title="Permanent link">&para;</a></h2>
<p>To get all contacts ordered by the primary display name,</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kd">val</span><span class="w"> </span><span class="nv">contacts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Contacts</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">    </span><span class="p">.</span><span class="na">broadQuery</span><span class="p">()</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">    </span><span class="p">.</span><span class="na">orderBy</span><span class="p">(</span><span class="n">ContactsFields</span><span class="p">.</span><span class="na">DisplayNamePrimary</span><span class="p">.</span><span class="na">asc</span><span class="p">())</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">    </span><span class="p">.</span><span class="na">find</span><span class="p">()</span>
</span></code></pre></div>
<p>To get all contacts that have any data (e.g. name, email, phone, address, organization, note, etc) 
that at least partially matches a given <code>searchText</code>,</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kd">val</span><span class="w"> </span><span class="nv">contacts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Contacts</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">    </span><span class="p">.</span><span class="na">broadQuery</span><span class="p">()</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">    </span><span class="p">.</span><span class="na">wherePartiallyMatches</span><span class="p">(</span><span class="n">searchText</span><span class="p">)</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">    </span><span class="p">.</span><span class="na">find</span><span class="p">()</span>
</span></code></pre></div>
<h2 id="specifying-accounts">Specifying Accounts<a class="headerlink" href="#specifying-accounts" title="Permanent link">&para;</a></h2>
<p>To limit the search to only those contacts associated with one of the given accounts,</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="p">.</span><span class="na">accounts</span><span class="p">(</span><span class="n">accounts</span><span class="p">)</span>
</span></code></pre></div>
<p>For example, to limit the search to contacts belonging to only one account,</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="p">.</span><span class="na">accounts</span><span class="p">(</span><span class="n">Account</span><span class="p">(</span><span class="s">&quot;john.doe@gmail.com&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;com.google&quot;</span><span class="p">))</span>
</span></code></pre></div>
<blockquote>
<p> For more info, read <a href="../../accounts/query-accounts/">Query for Accounts</a>.</p>
</blockquote>
<p>The Contacts returned may still contain RawContacts / data that belongs to other accounts not
specified in the given accounts because Contacts may be made up of more than one RawContact from
different Accounts. This is the same behavior as the AOSP Contacts app.</p>
<p>If no accounts are specified (this function is not called or called with no Accounts), then all
RawContacts of Contacts are included in the search.</p>
<p>A null Account may be provided here, which results in RawContacts with no associated Account to be
included in the search. RawContacts without an associated account are considered local contacts or
device-only contacts, which are not synced.</p>
<p>For more info, read about <a href="../../entities/about-local-contacts/">Local (device-only) contacts</a>.</p>
<blockquote>
<p> This may affect performance. This may require one or more additional queries, internally
performed in this function, which increases the time required for the search. Therefore, you
should only specify this if you actually need it.</p>
</blockquote>
<h2 id="specifying-groups">Specifying Groups<a class="headerlink" href="#specifying-groups" title="Permanent link">&para;</a></h2>
<p>To limit the search to only those RawContacts associated with at least one of the given groups,</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="p">.</span><span class="na">groups</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span>
</span></code></pre></div>
<p>For example, to limit the search to only friends,</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="p">.</span><span class="na">groups</span><span class="p">(</span><span class="n">friendsGroup</span><span class="p">)</span>
</span></code></pre></div>
<blockquote>
<p> For more info, read <a href="../../groups/query-groups/">Query groups</a>.</p>
</blockquote>
<p>Contacts returned may still contain RawContacts / data that belongs to other groups not specified in
the given groups because Contacts may be made up of more than one RawContact from different Groups.
This is the same behavior as the AOSP Contacts app.</p>
<p>If no groups are specified (this function is not called or called with no Groups), then all
RawContacts of Contacts are included in the search.</p>
<blockquote>
<p> This may affect performance. This may require one or more additional queries, internally
performed in this function, which increases the time required for the search. Therefore, you
should only specify this if you actually need it.</p>
</blockquote>
<h2 id="including-only-specific-data">Including only specific data<a class="headerlink" href="#including-only-specific-data" title="Permanent link">&para;</a></h2>
<p>To include only the given set of fields (data) in each of the matching contacts,</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="p">.</span><span class="na">include</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span>
</span></code></pre></div>
<p>For example, to only include email and name fields,</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="p">.</span><span class="na">include</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Email</span><span class="p">.</span><span class="na">all</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Name</span><span class="p">.</span><span class="na">all</span><span class="w"> </span><span class="p">}</span>
</span></code></pre></div>
<p>For more info, read <a href="../include-only-desired-data/">Include only certain fields for read and write operations</a>.</p>
<h3 id="optimize-your-queries">Optimize your queries<a class="headerlink" href="#optimize-your-queries" title="Permanent link">&para;</a></h3>
<p>To optimize speed and minimize CPU and memory consumption, it is highly recommended that you only 
include fields you need.</p>
<p>For more info, read <a href="../include-only-desired-data/#optimizing-queries">Optimizing queries</a>.</p>
<h2 id="ordering">Ordering<a class="headerlink" href="#ordering" title="Permanent link">&para;</a></h2>
<p>To order resulting Contacts using one or more fields,</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="p">.</span><span class="na">orderBy</span><span class="p">(</span><span class="n">fieldOrder</span><span class="p">)</span>
</span></code></pre></div>
<p>For example, to order contacts by favorite/starred status such that favorite/starred contacts
appear first in the list AND order by display name primary in ascending order (from a to z ignoring
case),</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="p">.</span><span class="na">orderBy</span><span class="p">(</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="w">    </span><span class="n">ContactsFields</span><span class="p">.</span><span class="na">Options</span><span class="p">.</span><span class="na">Starred</span><span class="p">.</span><span class="na">desc</span><span class="p">(),</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">    </span><span class="n">ContactsFields</span><span class="p">.</span><span class="na">DisplayNamePrimary</span><span class="p">.</span><span class="na">asc</span><span class="p">()</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="p">)</span>
</span></code></pre></div>
<p>String comparisons ignores case by default. Each orderBys provides <code>ignoreCase</code> as an optional
parameter.</p>
<p>Use <code>ContactsFields</code> to construct the orderBys.</p>
<blockquote>
<p> If you need to sort a collection of Contacts outside of a database query using any field (in
addition to <code>ContactsFields</code>), use <code>contacts.core.util.ContactsComparator</code>.
For more info, read <a href="../../other/convenience-functions/">Convenience functions</a>.</p>
</blockquote>
<h2 id="limiting-and-offsetting">Limiting and offsetting<a class="headerlink" href="#limiting-and-offsetting" title="Permanent link">&para;</a></h2>
<p>To limit the amount of contacts returned and/or offset (skip) a specified number of contacts, use 
the <code>limit</code> and <code>offset</code> functions;</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="p">.</span><span class="na">limit</span><span class="p">(</span><span class="n">limit</span><span class="p">)</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="p">.</span><span class="na">offset</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
</span></code></pre></div>
<p>For more info, read <a href="../limit-and-offset-queries/">Using limit and offset in queries</a>.</p>
<h2 id="executing-the-query">Executing the query<a class="headerlink" href="#executing-the-query" title="Permanent link">&para;</a></h2>
<p>To execute the query,</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="p">.</span><span class="na">find</span><span class="p">()</span>
</span></code></pre></div>
<h2 id="cancelling-the-query">Cancelling the query<a class="headerlink" href="#cancelling-the-query" title="Permanent link">&para;</a></h2>
<p>To cancel a query amid execution,</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="p">.</span><span class="na">find</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">returnTrueIfQueryShouldBeCancelled</span><span class="p">()</span><span class="w"> </span><span class="p">}</span>
</span></code></pre></div>
<p>The <code>find</code> function optionally takes in a function that, if it returns true, will cancel query
processing as soon as possible. The function is called numerous times during query processing to
check if processing should stop or continue. This gives you the option to cancel the query.</p>
<p>This is useful when used in multi-threaded environments. One scenario where this would be frequently
used is when performing queries as the user types a search text. You are able to cancel the current
query when the user enters new text.</p>
<p>For example, to automatically cancel the query inside a Kotlin coroutine when the coroutine is cancelled,</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="n">launch</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="w">    </span><span class="n">withContext</span><span class="p">(</span><span class="n">coroutineContext</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">contacts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">query</span><span class="p">.</span><span class="na">find</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">!</span><span class="n">isActive</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="p">}</span>
</span></code></pre></div>
<h2 id="performing-the-query-asynchronously">Performing the query asynchronously<a class="headerlink" href="#performing-the-query-asynchronously" title="Permanent link">&para;</a></h2>
<p>Queries are executed when the <code>find</code> function is invoked. The work is done in the same thread as
the call-site. This may result in a choppy UI.</p>
<p>To perform the work in a different thread, use the Kotlin coroutine extensions provided in the <code>async</code> module.
For more info, read <a href="../../async/async-execution-coroutines/">Execute work outside of the UI thread using coroutines</a>.</p>
<p>You may, of course, use other multi-threading libraries or just do it yourself =)</p>
<blockquote>
<p> Extensions for Kotlin Flow and RxJava are also in the project roadmap, which includes APIs for
listening to Contacts database changes.</p>
</blockquote>
<h2 id="performing-the-query-with-permission">Performing the query with permission<a class="headerlink" href="#performing-the-query-with-permission" title="Permanent link">&para;</a></h2>
<p>Queries require the <code>android.permission.READ_CONTACTS</code> permission. If not granted, the query will 
do nothing and return an empty list.</p>
<p>To perform the query with permission, use the extensions provided in the <code>permissions</code> module.
For more info, read <a href="../../permissions/permissions-handling-coroutines/">Permissions handling using coroutines</a>.</p>
<p>You may, of course, use other permission handling libraries or just do it yourself =)</p>
<h2 id="custom-data-support">Custom data support<a class="headerlink" href="#custom-data-support" title="Permanent link">&para;</a></h2>
<p>The <code>BroadQuery</code> API does not include custom data in the matching process. However, you may still
use the <code>include</code> function with custom data. For more info, read <a href="../../customdata/query-custom-data/">Query custom data</a>.</p>
<h2 id="using-the-match-and-wherepartiallymatches-functions-to-specify-matching-criteria">Using the <code>match</code> and <code>wherePartiallyMatches</code> functions to specify matching criteria<a class="headerlink" href="#using-the-match-and-wherepartiallymatches-functions-to-specify-matching-criteria" title="Permanent link">&para;</a></h2>
<p>The <code>BroadQuery</code> API lets the Contacts Provider perform the search using its own custom matching
algorithm via the <code>wherePartiallyMatches</code> function.</p>
<p>There are several different types of matching algorithms that can be used. The type is set via the
<code>match</code> function.</p>
<p>Matching is <strong>case-insensitive</strong> (case is ignored).</p>
<p><strong>Custom data are not included in the matching process!</strong> To match custom data, use <code>Query</code>.</p>
<h3 id="matchany">Match.ANY<a class="headerlink" href="#matchany" title="Permanent link">&para;</a></h3>
<p>Most, but not all, Contact data are included in the matching process.
E.G. name, email, phone, address, organization, note, etc.</p>
<p>Use this if you want to get the same results when searching contacts using the AOSP Contacts app 
and the Google Contacts app.</p>
<p>Data matching is more sophisticated under the hood than <code>Query</code>. The Contacts Provider matches parts
of several types of data in segments. For example, a Contact having the email "hologram@gram.net"
will be matched with the following texts;</p>
<ul>
<li>h</li>
<li>HOLO</li>
<li>@g</li>
<li>@gram.net</li>
<li>gram@</li>
<li>net</li>
<li>holo.net</li>
<li>hologram.net</li>
</ul>
<p>But will NOT be matched with the following texts;</p>
<ul>
<li>olo</li>
<li>@</li>
<li>gram@gram</li>
<li>am@gram.net</li>
</ul>
<p>Similarly, a Contact having the name "Zack Air" will be matched with the following texts;</p>
<ul>
<li>z</li>
<li>zack</li>
<li>zack, air</li>
<li>air, zack</li>
<li>za a</li>
<li>, z</li>
<li>, a</li>
<li>,a</li>
</ul>
<p>But will NOT be matched with the following texts;</p>
<ul>
<li>ack</li>
<li>ir</li>
<li>,</li>
</ul>
<p>Another example is a Contact having the note "Lots   of   spa        ces." will be
matched with the following texts;</p>
<ul>
<li>l</li>
<li>lots</li>
<li>lots of</li>
<li>of lots</li>
<li>ces spa       lots of.</li>
<li>lo o sp ce . . . . .</li>
</ul>
<p>But will NOT be matched with the following texts;</p>
<ul>
<li>.</li>
<li>ots</li>
</ul>
<p>Several types of data are matched in segments. E.G. A Contact with display name "Bell Zee" and 
phone numbers "987", "1 23", and "456" will be matched with "be bell ze 9 123 1 98 456".</p>
<h3 id="matchphone">Match.PHONE<a class="headerlink" href="#matchphone" title="Permanent link">&para;</a></h3>
<p>Only phones or (contact display name + any phones) are included in the matching process.</p>
<p>Use this if you want to get contacts that have a matching phone number or matching
(<code>Contact.displayNamePrimary</code> + any phone number).</p>
<p>If you are attempting to matching contacts with phone numbers using <code>Query</code>, then you will most
likely find it to difficult and tricky because the normalizedNumber could be null and matching
formatted numbers (e.g. (718) 737-1991) would require some special regular expressions. This match
might just be what you need =)</p>
<p>Only the <code>Contact.displayNamePrimary</code> and the phone number/normalizedNumber are included in the
matching process.</p>
<p>For example, a contact with <code>Contact.displayNamePrimary</code> of "Bob Dole" and phone number
"(718) 737-1991" (regardless of the value of normalizedNumber) will be matched with the following
texts;</p>
<ul>
<li>718</li>
<li>7187371991</li>
<li>7.1-8.7-3.7-19(91)</li>
<li>bob</li>
<li>dole</li>
</ul>
<p>Notice that "bob" and "dole" will trigger a match because the display name matches and the contact
has a phone number.</p>
<p>The following texts will NOT trigger a match because the comparison begins at the beginning of the
string and not in the middle or end;</p>
<ul>
<li>737</li>
<li>1991</li>
</ul>
<h3 id="matchemail">Match.EMAIL<a class="headerlink" href="#matchemail" title="Permanent link">&para;</a></h3>
<p>Only emails or (contact display name + any emails) are included in the matching process.</p>
<p>Only the <code>Contact.displayNamePrimary</code> and the email address are included in the matching process.</p>
<p>For example, the search text "bob" will match the following contacts;</p>
<ul>
<li>Robert Parr (bob@incredibles.com)</li>
<li>Bob Parr (incredible@android.com)</li>
</ul>
<p>Notice that the contact Bob Parr is also matched because the display name matches and an email
exist (even though it does not match).</p>
<p>The following search texts will NOT trigger a match because the comparison begins at the beginning
of the string and not in the middle or end;</p>
<ul>
<li>android</li>
<li>gmail</li>
<li>@</li>
<li>.com</li>
</ul>
<hr />
<h2 id="developer-notes-or-for-advanced-users">Developer notes (or for advanced users)<a class="headerlink" href="#developer-notes-or-for-advanced-users" title="Permanent link">&para;</a></h2>
<p>Matching only by phone number or email address is possible thanks to the following filter Uris
defined in <code>ContactsContract</code>, which exist for this specific purpose.</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="n">ContactsContract</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="w">    </span><span class="n">Contacts</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">CONTENT_FILTER_URI</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="c1">// Default used by BroadQuery</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="w">    </span><span class="n">CommonDataKinds</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="w">        </span><span class="n">Phone</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">CONTENT_FILTER_URI</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="w">        </span><span class="n">Email</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">CONTENT_FILTER_URI</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="p">}</span><span class="w"> </span>
</span></code></pre></div>
<p><strong>These special filter URIs are only available for the phone and email common data kinds.</strong></p>
<p>Note that the <code>EMAIL</code> and <code>PHONE</code> additionally matches the contact display name.</p>
<h3 id="comparison-table">Comparison table<a class="headerlink" href="#comparison-table" title="Permanent link">&para;</a></h3>
<p>I've done some preliminary testing on the differences between the different matching/filter 
algorithms. So, given the following contacts...</p>
<ol>
<li>Display name: Robert Parr<ul>
<li>Email: bob@incredibles.com</li>
</ul>
</li>
<li>Display name: Bob Parr<ul>
<li>Email: incredible@android.com</li>
</ul>
</li>
<li>Display name: Bob Dole<ul>
<li>Phone: (718) 737-1991</li>
</ul>
</li>
<li>Display name: vestrel00@gmail.com<ul>
<li>Email: vestrel00@gmail.com</li>
</ul>
</li>
<li>Display name: 646-123-4567<ul>
<li>Phone: 646-123-4567</li>
</ul>
</li>
<li>Display name: Secret agent.<ul>
<li>Address: Dole street</li>
<li>Company: 718</li>
<li>Note: Agent code is 646000. His skills are incredible!</li>
</ul>
</li>
</ol>
<p>Here are some search terms followed by matching contacts based on the type of <code>Match</code> used.</p>
<table>
<thead>
<tr>
<th><strong>Search term</strong></th>
<th><strong>ANY</strong></th>
<th><strong>PHONE</strong></th>
<th><strong>EMAIL</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>bob</td>
<td>1, 2, 3</td>
<td>3</td>
<td>1, 2</td>
</tr>
<tr>
<td>incredible</td>
<td>1, 2, 6</td>
<td></td>
<td>2</td>
</tr>
<tr>
<td>android</td>
<td>2</td>
<td></td>
<td></td>
</tr>
<tr>
<td>gmail</td>
<td>4</td>
<td></td>
<td></td>
</tr>
<tr>
<td>.com</td>
<td>1, 2, 4</td>
<td></td>
<td></td>
</tr>
<tr>
<td>@</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>7187371991</td>
<td>3</td>
<td>3</td>
<td></td>
</tr>
<tr>
<td>7.1-8.7-3.7-19(91)</td>
<td>3</td>
<td>3</td>
<td></td>
</tr>
<tr>
<td>646</td>
<td>5, 6</td>
<td>5</td>
<td></td>
</tr>
<tr>
<td>646-646</td>
<td>6</td>
<td></td>
<td></td>
</tr>
<tr>
<td>718</td>
<td>3, 6</td>
<td>3</td>
<td></td>
</tr>
<tr>
<td>1991</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>4567</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>000</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>dole</td>
<td>3, 6</td>
<td>3</td>
<td></td>
</tr>
</tbody>
</table>
<p>The above table gives us some insight on how sophisticated the matching (or search / indexing) 
algorithm is.</p>
<p>For the search term "bob",</p>
<ul>
<li>PHONE matches contact 3.<ul>
<li>Display name matches and contact has a phone even though it does match.</li>
</ul>
</li>
<li>EMAIL matches contact 1, 2.<ul>
<li>1 has a matching email "bob". 2 is also matched because the name matches even though the email
  does not. On the other hand, 3 is NOT matched even though the name matches because 3 has no
  email. Adding an email to 3 will cause 3 to be matched.</li>
</ul>
</li>
</ul>
<p>For the search term "incredible",</p>
<ul>
<li>EMAIL matches 2 (incredible@android.com) but NOT 1 (bob@incredibles.com).<ul>
<li>This means that email matching does not use <code>contains</code> but rather a form of <code>startsWith</code>.</li>
</ul>
</li>
</ul>
<p><strong>TLDR</strong></p>
<ul>
<li>ANY matches any contact data; name, email, phone, address, organization, note, etc.</li>
<li>EMAIL matches emails or (display name + any email)</li>
<li>PHONE matches phones or (display name + any phone)</li>
<li>EMAIL and PHONE matching is NOT as simple as using the <code>Query</code> API
  with <code>.where { [Email|Phone] contains searchTerm }</code></li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "content.code.select"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.83f73b43.min.js"></script>
      
    
  </body>
</html>